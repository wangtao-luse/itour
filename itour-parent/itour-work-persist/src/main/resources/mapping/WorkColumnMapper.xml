<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itour.persist.WorkColumnMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.itour.model.work.WorkColumn">
        <id column="ID" property="id" />
        <result column="COLUMN" property="column" />
        <result column="UID" property="uid" />
        <result column="CREATEDATE" property="createdate" />
    </resultMap>
    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        ID, COLUMN, UID, CREATEDATE
    </sql>
    
    <select id="getShowColumnList" resultType="com.itour.model.work.vo.WorkColumnVo" parameterType="String">
    select c.id, c.`COLUMN`,c.UID,tmp.count from t_w_work_column c,
(
select cid, count(*) count from t_w_work_info c,t_w_info_column d  where c.id =d.wid and c.UID=#{uid} GROUP BY uid,cid) tmp
where c.id=tmp.cid ORDER BY  c.CREATEDATE DESC
    </select>

</mapper>
